appId: com.kangfenmao.CherryStudio
productName: Cherry Studio
electronLanguages:
  - zh-CN
  - zh-TW
  - en-US
  - ja # macOS/linux/win
  - ru # macOS/linux/win
  - zh_CN # for macOS
  - zh_TW # for macOS
  - en # for macOS
directories:
  buildResources: build

protocols:
  - name: Cherry Studio
    schemes:
      - cherrystudio
files:
  - "**/*"
  - "!**/{.vscode,.yarn,.yarn-lock,.github,.cursorrules,.prettierrc}"
  - "!electron.vite.config.{js,ts,mjs,cjs}}"
  - "!**/{.eslintignore,.eslintrc.js,.eslintrc.json,.eslintcache,root.eslint.config.js,eslint.config.js,.eslintrc.cjs,.prettierignore,.prettierrc.yaml,eslint.config.mjs,dev-app-update.yml,CHANGELOG.md,README.md,biome.jsonc}"
  - "!**/{.env,.env.*,.npmrc,pnpm-lock.yaml}"
  - "!**/{tsconfig.json,tsconfig.tsbuildinfo,tsconfig.node.json,tsconfig.web.json}"
  - "!**/{.editorconfig,.jekyll-metadata}"
  - "!src"
  - "!scripts"
  - "!local"
  - "!docs"
  - "!packages"
  - "!.swc"
  - "!.bin"
  - "!._*"
  - "!*.log"
  - "!stats.html"
  - "!*.md"
  - "!**/*.{iml,o,hprof,orig,pyc,pyo,rbc,swp,csproj,sln,xproj}"
  - "!**/*.{map,ts,tsx,jsx,less,scss,sass,css.d.ts,d.cts,d.mts,md,markdown,yaml,yml}"
  - "!**/{test,tests,__tests__,powered-test,coverage}/**"
  - "!**/{example,examples}/**"
  - "!**/*.{spec,test}.{js,jsx,ts,tsx}"
  - "!**/*.min.*.map"
  - "!**/*.d.ts"
  - "!**/dist/es6/**"
  - "!**/dist/demo/**"
  - "!**/amd/**"
  - "!**/{.DS_Store,Thumbs.db,thumbs.db,__pycache__}"
  - "!**/{LICENSE,license,LICENSE.*,*.LICENSE.txt,NOTICE.txt,README.md,readme.md,CHANGELOG.md}"
  - "!node_modules/rollup-plugin-visualizer"
  - "!node_modules/js-tiktoken"
  - "!node_modules/@tavily/core/node_modules/js-tiktoken"
  - "!node_modules/pdf-parse/lib/pdf.js/{v1.9.426,v1.10.88,v2.0.550}"
  - "!node_modules/mammoth/{mammoth.browser.js,mammoth.browser.min.js}"
  - "!node_modules/selection-hook/prebuilds/**/*" # we rebuild .node, don't use prebuilds
  - "!node_modules/selection-hook/node_modules" # we don't need what in the node_modules dir
  - "!node_modules/selection-hook/src" # we don't need source files
  - "!node_modules/tesseract.js-core/{tesseract-core.js,tesseract-core.wasm,tesseract-core.wasm.js}" # we don't need source files
  - "!node_modules/tesseract.js-core/{tesseract-core-lstm.js,tesseract-core-lstm.wasm,tesseract-core-lstm.wasm.js}" # we don't need source files
  - "!node_modules/tesseract.js-core/{tesseract-core-simd-lstm.js,tesseract-core-simd-lstm.wasm,tesseract-core-simd-lstm.wasm.js}" # we don't need source files
  - "!**/*.{h,iobj,ipdb,tlog,recipe,vcxproj,vcxproj.filters,Makefile,*.Makefile}" # filter .node build files
asarUnpack:
  - resources/**
  - "**/*.{metal,exp,lib}"
  - "node_modules/@img/sharp-libvips-*/**"
win:
  executableName: Cherry Studio
  artifactName: ${productName}-${version}-${arch}-setup.${ext}
  target:
    - target: nsis
    - target: portable
  signtoolOptions:
    sign: scripts/win-sign.js
  verifyUpdateCodeSignature: false
nsis:
  artifactName: ${productName}-${version}-${arch}-setup.${ext}
  shortcutName: ${productName}
  uninstallDisplayName: ${productName}
  createDesktopShortcut: always
  allowToChangeInstallationDirectory: true
  oneClick: false
  include: build/nsis-installer.nsh
  buildUniversalInstaller: false
portable:
  artifactName: ${productName}-${version}-${arch}-portable.${ext}
  buildUniversalInstaller: false
mac:
  entitlementsInherit: build/entitlements.mac.plist
  notarize: false
  artifactName: ${productName}-${version}-${arch}.${ext}
  minimumSystemVersion: "20.1.0" # æœ€ä½æ”¯æŒ macOS 11.0
  extendInfo:
    - NSCameraUsageDescription: Application requests access to the device's camera.
    - NSMicrophoneUsageDescription: Application requests access to the device's microphone.
    - NSDocumentsFolderUsageDescription: Application requests access to the user's Documents folder.
    - NSDownloadsFolderUsageDescription: Application requests access to the user's Downloads folder.
  target:
    - target: dmg
    - target: zip
linux:
  artifactName: ${productName}-${version}-${arch}.${ext}
  target:
    - target: AppImage
    - target: deb
    - target: rpm
  maintainer: electronjs.org
  category: Utility
  desktop:
    entry:
      StartupWMClass: CherryStudio
  mimeTypes:
    - x-scheme-handler/cherrystudio
rpm:
  # Workaround for electron build issue on rpm package:
  # https://github.com/electron/forge/issues/3594
  fpm: ["--rpm-rpmbuild-define=_build_id_links none"]
publish:
  provider: generic
  url: https://releases.cherry-ai.com
electronDownload:
  mirror: https://npmmirror.com/mirrors/electron/
beforePack: scripts/before-pack.js
afterPack: scripts/after-pack.js
afterSign: scripts/notarize.js
artifactBuildCompleted: scripts/artifact-build-completed.js
releaseInfo:
  releaseNotes: |
    <!--LANG:en-->
    ğŸš€ New Features:
    - Refactored AI core engine for more efficient and stable content generation
    - Added support for multiple AI model providers: CherryIN, AiOnly
    - Added API server functionality for external application integration
    - Added PaddleOCR document recognition for enhanced document processing
    - Added Anthropic OAuth authentication support
    - Added data storage space limit notifications
    - Added font settings for global and code fonts customization
    - Added auto-copy feature after translation completion
    - Added keyboard shortcuts: rename topic, edit last message, etc.
    - Added text attachment preview for viewing file contents in messages
    - Added custom window control buttons (minimize, maximize, close)
    - Support for Qwen long-text (qwen-long) and document analysis (qwen-doc) models with native file uploads
    - Support for Qwen image recognition models (Qwen-Image)
    - Added iFlow CLI support
    - Converted knowledge base and web search to tool-calling approach for better flexibility

    ğŸ¨ UI Improvements & Bug Fixes:
    - Integrated HeroUI and Tailwind CSS framework
    - Optimized message notification styles with unified toast component
    - Moved free models to bottom with fixed position for easier access
    - Refactored quick panel and input bar tools for smoother operation
    - Optimized responsive design for navbar and sidebar
    - Improved scrollbar component with horizontal scrolling support
    - Fixed multiple translation issues: paste handling, file processing, state management
    - Various UI optimizations and bug fixes
    <!--LANG:zh-CN-->
    ğŸš€ æ–°åŠŸèƒ½ï¼š
    - é‡æ„ AI æ ¸å¿ƒå¼•æ“ï¼Œæä¾›æ›´é«˜æ•ˆç¨³å®šçš„å†…å®¹ç”Ÿæˆ
    - æ–°å¢å¤šä¸ª AI æ¨¡å‹æä¾›å•†æ”¯æŒï¼šCherryINã€AiOnly
    - æ–°å¢ API æœåŠ¡å™¨åŠŸèƒ½ï¼Œæ”¯æŒå¤–éƒ¨åº”ç”¨é›†æˆ
    - æ–°å¢ PaddleOCR æ–‡æ¡£è¯†åˆ«ï¼Œå¢å¼ºæ–‡æ¡£å¤„ç†èƒ½åŠ›
    - æ–°å¢ Anthropic OAuth è®¤è¯æ”¯æŒ
    - æ–°å¢æ•°æ®å­˜å‚¨ç©ºé—´é™åˆ¶æé†’
    - æ–°å¢å­—ä½“è®¾ç½®ï¼Œæ”¯æŒå…¨å±€å­—ä½“å’Œä»£ç å­—ä½“è‡ªå®šä¹‰
    - æ–°å¢ç¿»è¯‘å®Œæˆåè‡ªåŠ¨å¤åˆ¶åŠŸèƒ½
    - æ–°å¢é”®ç›˜å¿«æ·é”®ï¼šé‡å‘½åä¸»é¢˜ã€ç¼–è¾‘æœ€åä¸€æ¡æ¶ˆæ¯ç­‰
    - æ–°å¢æ–‡æœ¬é™„ä»¶é¢„è§ˆï¼Œå¯æŸ¥çœ‹æ¶ˆæ¯ä¸­çš„æ–‡ä»¶å†…å®¹
    - æ–°å¢è‡ªå®šä¹‰çª—å£æ§åˆ¶æŒ‰é’®ï¼ˆæœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­ï¼‰
    - æ”¯æŒé€šä¹‰åƒé—®é•¿æ–‡æœ¬ï¼ˆqwen-longï¼‰å’Œæ–‡æ¡£åˆ†æï¼ˆqwen-docï¼‰æ¨¡å‹ï¼ŒåŸç”Ÿæ–‡ä»¶ä¸Šä¼ 
    - æ”¯æŒé€šä¹‰åƒé—®å›¾åƒè¯†åˆ«æ¨¡å‹ï¼ˆQwen-Imageï¼‰
    - æ–°å¢ iFlow CLI æ”¯æŒ
    - çŸ¥è¯†åº“å’Œç½‘é¡µæœç´¢è½¬æ¢ä¸ºå·¥å…·è°ƒç”¨æ–¹å¼ï¼Œæå‡çµæ´»æ€§

    ğŸ¨ ç•Œé¢æ”¹è¿›ä¸é—®é¢˜ä¿®å¤ï¼š
    - é›†æˆ HeroUI å’Œ Tailwind CSS æ¡†æ¶
    - ä¼˜åŒ–æ¶ˆæ¯é€šçŸ¥æ ·å¼ï¼Œç»Ÿä¸€ toast ç»„ä»¶
    - å…è´¹æ¨¡å‹ç§»è‡³åº•éƒ¨å›ºå®šä½ç½®ï¼Œä¾¿äºè®¿é—®
    - é‡æ„å¿«æ·é¢æ¿å’Œè¾“å…¥æ å·¥å…·ï¼Œæ“ä½œæ›´æµç•…
    - ä¼˜åŒ–å¯¼èˆªæ å’Œä¾§è¾¹æ å“åº”å¼è®¾è®¡
    - æ”¹è¿›æ»šåŠ¨æ¡ç»„ä»¶ï¼Œæ”¯æŒæ°´å¹³æ»šåŠ¨
    - ä¿®å¤å¤šä¸ªç¿»è¯‘é—®é¢˜ï¼šç²˜è´´å¤„ç†ã€æ–‡ä»¶å¤„ç†ã€çŠ¶æ€ç®¡ç†
    - å„ç§ç•Œé¢ä¼˜åŒ–å’Œé—®é¢˜ä¿®å¤
    <!--LANG:END-->

